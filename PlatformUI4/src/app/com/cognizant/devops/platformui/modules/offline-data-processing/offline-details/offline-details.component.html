<!--
 *********************************************************************************
 * Copyright 2019 Cognizant Technology Solutions
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License.  You may obtain a copy
 * of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.  See the
 * License for the specific language governing permissions and limitations under
 * the License.
 *******************************************************************************-->

<div class="titleContainer">
  <h1>Additional Details - {{ queryName }}</h1>
  <a (click)="closeShowDetailsDialog()" mat-dialog-close>
    <mat-icon svgIcon="close_dialog" class="closeIcon"> </mat-icon>
  </a>
</div>
<mat-dialog-content class="mat-dialog-content">
  <div class="loading-indicator">
    <mat-progress-spinner
      [diameter]="70"
      *ngIf="showThrobber"
      color="primary"
      mode="indeterminate"
    >
    </mat-progress-spinner>
  </div>

  <table
    mat-table
    [dataSource]="offlineDatasource"
    class="mat-elevation-z8"
    style="margin-top: 2% !important ; box-shadow: none !important"
  >
    <!-- Status Column-->
    <ng-container matColumnDef="status">
      <th mat-header-cell *matHeaderCellDef class="tableHeader">Status</th>
      <td
        mat-cell
        *matCellDef="let element"
        style="width: 10% !important; text-align: center"
      >
        {{ element.status }}
      </td>
    </ng-container>

    <!-- RetryCount Column-->
    <ng-container matColumnDef="retryCount">
      <th mat-header-cell *matHeaderCellDef class="tableHeader">Retry Count</th>
      <td
        mat-cell
        *matCellDef="let element"
        style="width: 10% !important; text-align: center"
      >
        {{ element.retryCount }}
      </td>
    </ng-container>

    <!-- Message Column-->
    <ng-container matColumnDef="message">
      <th mat-header-cell *matHeaderCellDef class="tableHeader">Log Message</th>
      <td
        mat-cell
        *matCellDef="let element"
        style="width: 10% !important; text-align: center"
        matTooltip="{{element.message}}"
      >
        {{hideTextOverflow(element.message)}}
      </td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
  </table>
</mat-dialog-content>

<mat-dialog-actions>
  <div class="footer">
    <div class="logDetails">Current Timezone: {{ timezone }}</div>
  </div>
</mat-dialog-actions>
